import{d as N,r as w,c as x,b as u,e as c,g as t,t as m,f as C,F as M,l as E,_ as R,w as K,k as Q,m as A,n as X,p as Z,o as ee,a as te,q as se,s as ae,x as ie,h as oe,u as re}from"./index-Cc4tWAHr.js";import{h as P,e as ne,g as le}from"./errorHandler-CM8Dv8ir.js";async function U(p,e,s){const{data:i}=await P.get("/data/2.5/weather",{params:{lat:p,lon:e},signal:s});return{city:i.name,temp:Math.round(i.main.temp),desc:i.weather[0]?.description??"",icon:i.weather[0]?.icon??"01d",wind:i.wind.speed,humidity:i.main.humidity,pressure:i.main.pressure}}function de(p,e){const s=new Date((p+e)*1e3),i=s.getUTCFullYear(),r=String(s.getUTCMonth()+1).padStart(2,"0"),a=String(s.getUTCDate()).padStart(2,"0");return`${i}-${r}-${a}`}function ce(p,e,s=navigator.language){const i=new Date((p+e)*1e3);return new Intl.DateTimeFormat(s,{weekday:"short"}).format(i).replace(".","")}function ue(p,e){if(!p.length)return{dt:0,icon:"01d",desc:"clear sky"};let s=p[0],i=Number.POSITIVE_INFINITY;for(const r of p){const a=new Date((r.dt+e)*1e3).getUTCHours(),l=Math.abs(a-13);l<i&&(s=r,i=l)}return s}async function z(p,e,s=4,i){const{data:r}=await P.get("/data/2.5/forecast",{params:{lat:p,lon:e},signal:i}),a=r.city.timezone??0,l=new Map;for(const d of r.list){const v=de(d.dt,a),o=l.get(v)??{dt:d.dt,min:d.main.temp_min,max:d.main.temp_max,icons:[]};o.dt=Math.min(o.dt,d.dt),o.min=Math.min(o.min,d.main.temp_min),o.max=Math.max(o.max,d.main.temp_max),o.icons.push({dt:d.dt,icon:d.weather[0]?.icon??"01d",desc:d.weather[0]?.description??""}),l.set(v,o)}return Array.from(l.entries()).sort((d,v)=>d[1].dt-v[1].dt).slice(0,Math.max(3,Math.min(s,5))).map(([d,v])=>{const o=ue(v.icons,a);return{dateISO:d,dayLabel:ce(v.dt,a),min:Math.round(v.min),max:Math.round(v.max),icon:o?.icon??"01d",desc:o?.desc??"clear sky"}})}const F="weather_cache",ve={maxAge:300*1e3,maxSize:50};class _e{config;constructor(e={}){this.config={...ve,...e}}generateKey(e,s){return`${e.toFixed(3)},${s.toFixed(3)}`}loadCache(){try{const e=localStorage.getItem(F);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to load weather cache:",e),{}}}saveCache(e){try{localStorage.setItem(F,JSON.stringify(e))}catch(s){console.warn("Failed to save weather cache:",s)}}isExpired(e){return Date.now()-e.timestamp>this.config.maxAge}cleanupExpired(e){const s={};for(const[i,r]of Object.entries(e))this.isExpired(r)||(s[i]=r);return s}limitSize(e){const s=Object.entries(e);if(s.length<=this.config.maxSize)return e;s.sort((r,a)=>a[1].timestamp-r[1].timestamp);const i={};return s.slice(0,this.config.maxSize).forEach(([r,a])=>{i[r]=a}),i}get(e,s){const i=this.generateKey(e,s),a=this.loadCache()[i];return!a||this.isExpired(a)?null:a}set(e,s,i){const r=this.generateKey(e,s);let a=this.loadCache();a[r]={...i,timestamp:Date.now()},a=this.cleanupExpired(a),a=this.limitSize(a),this.saveCache(a)}has(e,s){return this.get(e,s)!==null}clear(){localStorage.removeItem(F)}cleanup(){let e=this.loadCache();e=this.cleanupExpired(e),this.saveCache(e)}getStats(){const e=this.loadCache(),s=Object.values(e);if(s.length===0)return{size:0,oldestTimestamp:0,newestTimestamp:0};const i=s.map(r=>r.timestamp);return{size:s.length,oldestTimestamp:Math.min(...i),newestTimestamp:Math.max(...i)}}}const I=new _e,me={class:"error-display error-display--danger",role:"alert"},pe={class:"error-display__container"},he={class:"error-display__icon"},fe={class:"error-display__content"},ye={class:"error-display__message"},be={key:0,class:"error-display__actions"},ge={class:"error-display__button-text"},we={key:1,class:"error-display__stats"},ke={class:"error-display__stats-content"},$e={class:"error-display__stats-section"},Ce={class:"error-display__stats-items"},xe={class:"error-display__stats-section"},De={class:"error-display__stats-items"},Ae=N({__name:"ErrorDisplay",props:{error:{},operation:{default:"unknown"},canRetry:{type:Boolean,default:!1},showDetails:{type:Boolean,default:!1}},emits:["retry","dismiss"],setup(p,{emit:e}){const s=p,i=e,r=w(!1),a=x(()=>ne.getErrorStats()),l=x(()=>s.error.includes("üåê")?"üåê":s.error.includes("‚è±Ô∏è")?"‚è±Ô∏è":s.error.includes("üîë")?"üîë":s.error.includes("üö¶")?"üö¶":s.error.includes("üîç")?"üîç":s.error.includes("üõ†Ô∏è")?"üõ†Ô∏è":s.error.includes("‚ùå")?"‚ùå":s.error.includes("üòî")?"üòî":"‚ö†Ô∏è"),h=x(()=>s.canRetry&&(s.error.includes("—Å–µ—Ç—å—é")||s.error.includes("–≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è")||s.error.includes("—Å–µ—Ä–≤–µ—Ä")||s.error.includes("–º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤"))),d=()=>{i("retry")},v=()=>{i("dismiss")};return(o,_)=>(c(),u("div",me,[t("div",pe,[t("div",he,m(l.value),1),t("div",fe,[t("div",ye,m(o.error),1),h.value||o.showDetails?(c(),u("div",be,[h.value?(c(),u("button",{key:0,class:"error-display__button error-display__button--retry",onClick:d},[..._[1]||(_[1]=[t("span",{class:"error-display__button-icon"},"üîÑ",-1),t("span",{class:"error-display__button-text"},"–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞",-1)])])):C("",!0),o.showDetails?(c(),u("button",{key:1,class:"error-display__button error-display__button--details",onClick:_[0]||(_[0]=k=>r.value=!r.value)},[t("span",ge,m(r.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–¥—Ä–æ–±–Ω–µ–µ"),1)])):C("",!0),t("button",{class:"error-display__button error-display__button--dismiss",onClick:v},[..._[2]||(_[2]=[t("span",{class:"error-display__button-icon"},"‚úï",-1),t("span",{class:"error-display__button-text"},"–ó–∞–∫—Ä—ã—Ç—å",-1)])])])):C("",!0),r.value&&o.showDetails?(c(),u("div",we,[t("div",ke,[_[5]||(_[5]=t("div",{class:"error-display__stats-title"},"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫:",-1)),t("div",$e,[_[3]||(_[3]=t("div",{class:"error-display__stats-label"},"–ü–æ —Ç–∏–ø—É:",-1)),t("div",Ce,[(c(!0),u(M,null,E(a.value.byType,(k,$)=>(c(),u("span",{key:$,class:"error-display__stats-item"},m($)+": "+m(k),1))),128))])]),t("div",xe,[_[4]||(_[4]=t("div",{class:"error-display__stats-label"},"–ü–æ –æ–ø–µ—Ä–∞—Ü–∏–∏:",-1)),t("div",De,[(c(!0),u(M,null,E(a.value.byOperation,(k,$)=>(c(),u("span",{key:$,class:"error-display__stats-item"},m($)+": "+m(k),1))),128))])])])])):C("",!0)])])]))}}),Se=R(Ae,[["__scopeId","data-v-0df9534d"]]),Ie="models/gemini-1.5-flash";async function Me(p){const e={contents:[{role:"user",parts:[{text:'You are a helpful weather advisor. Return ONLY compact JSON object with two string fields: {"en":"US English text","ru":"–†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç"}. Do not include markdown, not code fences, no explanations.'},{text:p}]}],generationConfig:{temperature:.6,maxOutputTokens:240,responseMimeType:"application/json",responseSchema:{type:"object",properties:{en:{type:"string"},ru:{type:"string"}},required:["en","ru"]}}},s=await fetch(`/proxy/gemini/v1beta/${Ie}:generateContent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){const a=await s.text();throw new Error(`Gemini request failed: ${s.status} ${a}`)}const r=(await s.json())?.candidates?.[0]?.content?.parts?.[0]?.text??"{}";try{const a=JSON.parse(r);if(typeof a?.en=="string"&&typeof a?.ru=="string")return a;if(typeof a?.advice=="string"){const l=a.advice;return/[–ê-–Ø–∞-—è–Å—ë]/.test(l)?{en:"",ru:l}:{en:l,ru:""}}return{en:String(r),ru:""}}catch{return{en:String(r),ru:""}}}class S{static generateWeatherAdvicePrompt(e,s){const{city:i,temp:r,description:a,humidity:l,windSpeed:h}=e,d=new Date().getHours(),v=this.getTimeOfDay(d),o=this.getTemperatureDescription(r),_=this.translateWeatherDescription(a),k=this.getWindDescription(h),$=this.getHumidityDescription(l),b=s?.forecast?.length?this.getForecastSummary(s.forecast.slice(0,2)):"",f=[`Weather advice for ${i}:`,`${o} ${r}¬∞C,`,`${_},`,k?`${k},`:"",$?`${$},`:"",`${v}.`,b,"Give brief personal advice (clothing, activities, health tips). Answer in Russian."].filter(Boolean).join(" ");return this.truncateToWordLimit(f,40)}static generateComparisonPrompt(e,...s){const a=`Compare weather: ${[e,...s].slice(0,3).map(l=>`${l.city}: ${l.temp}¬∞C, ${this.translateWeatherDescription(l.description)}`).join("; ")}. Best choice for outdoor activities? Russian please.`;return this.truncateToWordLimit(a,35)}static generateActivityPrompt(e,s){const{temp:i,description:r,windSpeed:a,humidity:l}=e,h=this.translateWeatherDescription(r),d=`Weather for ${s}: ${i}¬∞C, ${h}, wind ${a}m/s, humidity ${l}%. Is it suitable? Tips in Russian.`;return this.truncateToWordLimit(d,35)}static getTimeOfDay(e){return e>=6&&e<12?"morning":e>=12&&e<18?"afternoon":e>=18&&e<22?"evening":"night"}static getTemperatureDescription(e){return e<-10?"Very cold":e<0?"Cold":e<10?"Cool":e<20?"Mild":e<30?"Warm":"Hot"}static translateWeatherDescription(e){const s={—è—Å–Ω–æ:"clear",—Å–æ–ª–Ω–µ—á–Ω–æ:"sunny",–æ–±–ª–∞—á–Ω–æ:"cloudy",–ø–∞—Å–º—É—Ä–Ω–æ:"overcast",–¥–æ–∂–¥—å:"rain",—Å–Ω–µ–≥:"snow",—Ç—É–º–∞–Ω:"fog",–≥—Ä–æ–∑–∞:"thunderstorm",–≤–µ—Ç—Ä–µ–Ω–æ:"windy"},i=e.toLowerCase();for(const[r,a]of Object.entries(s))if(i.includes(r))return a;return e.length>15?e.substring(0,15):e}static getWindDescription(e){return e<2?"":e<5?"light breeze":e<10?"moderate wind":"strong wind"}static getHumidityDescription(e){return e<30?"dry air":e>80?"high humidity":""}static getForecastSummary(e){if(!e.length)return"";const s=e[0];return s?`Tomorrow: ${s.min}-${s.max}¬∞C.`:""}static truncateToWordLimit(e,s){const i=e.split(/\s+/);return i.length<=s?e:i.slice(0,s).join(" ")+"..."}static getQuickPrompts(e){return[{title:"–û–±—â–∏–µ —Å–æ–≤–µ—Ç—ã",prompt:S.generateWeatherAdvicePrompt(e),icon:"üí°"},{title:"–û–¥–µ–∂–¥–∞",prompt:`What to wear today? ${e.temp}¬∞C, ${e.description}. Clothing advice in Russian.`,icon:"üëî"},{title:"–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",prompt:`Best activities for ${e.temp}¬∞C ${e.description} weather? Russian tips.`,icon:"üèÉ‚Äç‚ôÇÔ∏è"},{title:"–ó–¥–æ—Ä–æ–≤—å–µ",prompt:`Health tips for ${e.temp}¬∞C, humidity ${e.humidity}%, ${e.description}? Russian advice.`,icon:"üè•"}]}}S.generateWeatherAdvicePrompt;S.generateActivityPrompt;S.getQuickPrompts;const Te={class:"ai-advisor-modal__dialog",role:"document"},Ee={class:"ai-advisor-modal__content"},Oe={class:"ai-advisor-modal__header"},Fe={class:"ai-advisor-modal__title"},Ne={class:"ai-advisor-modal__body"},Re={key:0,class:"ai-advisor-modal__empty-state"},We={key:1,class:"ai-advisor-modal__content-wrapper"},Be={class:"ai-advisor-modal__advice-section ai-advisor-modal__advice-section--english"},Le={class:"ai-advisor-modal__advice-text"},je={class:"ai-advisor-modal__advice-section ai-advisor-modal__advice-section--russian"},Ue={class:"ai-advisor-modal__advice-text"},ze={class:"ai-advisor-modal__footer"},Pe=["disabled"],He={class:"ai-advisor-modal__button-icon"},qe={class:"ai-advisor-modal__button-text"},Ve=["disabled"],Ge={key:0,class:"ai-advisor-modal__spinner"},Ye={key:1,class:"ai-advisor-modal__backdrop ai-advisor-modal__backdrop--visible"},Je=N({__name:"AIAdvisorModal",props:{isOpen:{type:Boolean},weather:{},forecast:{}},emits:["close"],setup(p,{emit:e}){const s=p,i=e,r=w(!1),a=w(""),l=w(""),h=w(!1);let d=null,v=0;const o=x(()=>s.weather?`AI Advice for ${s.weather.city}`:"AI Advice"),_=()=>{i("close")},k=async()=>{if(!s.weather)return;const b=Date.now();if(!(b-v<800)){v=b,d&&d.abort(),d=new AbortController,r.value=!0;try{const f=S.generateWeatherAdvicePrompt(s.weather,s.forecast),{en:D,ru:T}=await Me(f);a.value=D,l.value=T}catch{a.value="Failed to get AI advice.",l.value="–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–æ–≤–µ—Ç AI."}finally{r.value=!1,d=null}}},$=async()=>{const b=`US English:
${a.value}

RU –†—É—Å—Å–∫–∏–π:
${l.value}`;try{await navigator.clipboard.writeText(b),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}catch{}};return K(()=>s.isOpen,b=>{b&&k()}),(b,f)=>(c(),u(M,null,[b.isOpen?(c(),u("div",{key:0,class:"ai-advisor-modal ai-advisor-modal--open",tabindex:"-1",role:"dialog",onClick:Q(_,["self"])},[t("div",Te,[t("div",Ee,[t("div",Oe,[t("h5",Fe,[f[0]||(f[0]=t("span",{class:"ai-advisor-modal__icon"},"üí°",-1)),A(" "+m(o.value),1)]),t("button",{type:"button",class:"ai-advisor-modal__close-btn",onClick:_,"aria-label":"Close modal"})]),t("div",Ne,[b.weather?(c(),u("div",We,[t("div",Be,[f[1]||(f[1]=t("div",{class:"ai-advisor-modal__advice-label"},"US English:",-1)),t("div",Le,m(a.value),1)]),t("div",je,[f[2]||(f[2]=t("div",{class:"ai-advisor-modal__advice-label"},"RU –†—É—Å—Å–∫–∏–π:",-1)),t("div",Ue,m(l.value),1)])])):(c(),u("div",Re," –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. "))]),t("div",ze,[t("button",{type:"button",class:X(["ai-advisor-modal__button ai-advisor-modal__button--copy",{"ai-advisor-modal__button--success":h.value}]),onClick:$,disabled:h.value},[t("span",He,m(h.value?"‚úÖ":"üìÑ"),1),t("span",qe,m(h.value?"Copied!":"Copy"),1)],10,Pe),t("button",{type:"button",class:"ai-advisor-modal__button ai-advisor-modal__button--primary",disabled:!b.weather||r.value,onClick:k},[r.value?(c(),u("span",Ge)):C("",!0),f[3]||(f[3]=t("span",{class:"ai-advisor-modal__button-text"},"Generate again",-1))],8,Ve)])])])])):C("",!0),b.isOpen?(c(),u("div",Ye)):C("",!0)],64))}}),Ke=R(Je,[["__scopeId","data-v-d79aeaec"]]),Qe={class:"container py-4 weather-details"},Xe={class:"u-card p-3"},Ze={class:"d-flex align-items-center justify-content-between mb-2"},et={class:"h5 m-0"},tt={class:"d-flex align-items-center gap-2"},st={key:0,class:"text-muted"},at={key:1,class:"badge bg-success-subtle text-success-emphasis",title:"–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –∫—ç—à–∞"},it=["disabled"],ot=["disabled"],rt={key:0,class:"spinner-border spinner-border-sm me-1"},nt={key:1,class:"me-1"},lt={key:1,class:"weather-skeleton"},dt={class:"forecast-skeleton"},ct={class:"forecast-brief__list"},ut={key:2,class:"weather-details__grid"},vt={class:"weather-details__main"},_t={class:"weather-details__temp display-4 mb-0"},mt={class:"weather-details__desc text-capitalize"},pt={class:"weather-details__icon"},ht=["src"],ft={class:"weather-details__meta"},yt={class:"row g-2"},bt={class:"col-6"},gt={class:"weather-details__item"},wt={class:"weather-details__value"},kt={class:"col-6"},$t={class:"weather-details__item"},Ct={class:"weather-details__value"},xt={class:"col-6"},Dt={class:"weather-details__item"},At={class:"weather-details__value"},St={class:"text-muted"},It={key:3,class:"text-muted"},Mt={key:4,class:"forecast-brief"},Tt={class:"forecast-brief__list"},Et={class:"forecast-brief__day"},Ot=["src","alt"],Ft={class:"forecast-brief__temps"},Nt={class:"forecast-brief__tmax"},Rt={class:"forecast-brief__tmin text-muted"},Wt={key:5,class:"u-card p-3 mt-3"},Bt={class:"d-flex align-items-center justify-content-between mb-2"},Lt={class:"d-flex align-items-center mb-0"},jt={class:"ai-advice-content p-3 bg-light rounded"},Ut={class:"ai-advice-text"},zt=N({__name:"WeatherDetails",setup(p){const e=w([]);let s=null;const i=Z(),r=re(),a=Number(i.query.lat),l=Number(i.query.lon),h=String(i.query.name??""),d=w(!1),v=w(""),o=w(null);let _=null;const k=x(()=>o.value?`https://openweathermap.org/img/wn/${o.value.icon}@2x.png`:""),$=x(()=>o.value?Math.round(o.value.pressure*.750063755):0),b=x(()=>I.has(a,l)),f=w(!1),D=w(""),T=w(""),O=w(!1),W=x(()=>o.value?{city:o.value.city,temp:o.value.temp,description:o.value.desc,humidity:o.value.humidity,windSpeed:o.value.wind,pressure:o.value.pressure,icon:o.value.icon}:null),H=x(()=>({forecast:e.value.map(y=>({dayLabel:y.dayLabel,min:y.min,max:y.max,desc:y.desc}))})),B=x(()=>!d.value&&!v.value&&W.value!==null),q=async()=>{if(!Number.isFinite(a)||!Number.isFinite(l)){v.value="–ù–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –∏–∑ —Å–ø–∏—Å–∫–∞.";return}const y=I.get(a,l);if(y){o.value=y.data,e.value=y.forecast,v.value="";return}try{_&&_.abort(),_=new AbortController,d.value=!0,v.value="";const n=await U(a,l,_.signal);o.value=n,s&&s.abort(),s=new AbortController;const g=await z(a,l,4,s.signal);e.value=g,I.set(a,l,{data:n,forecast:g})}catch(n){L(n)}finally{d.value=!1}},V=()=>{r.push({name:"home"})},L=y=>{const n=le(y,"get-weather");n&&(v.value=n)},j=()=>{J()},G=()=>{B.value&&(f.value=!0)},Y=()=>{f.value=!1,D.value="",T.value=""},J=async()=>{if(!Number.isFinite(a)||!Number.isFinite(l)){v.value="–ù–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –∏–∑ —Å–ø–∏—Å–∫–∞.";return}try{_&&_.abort(),_=new AbortController,d.value=!0,v.value="";const y=await U(a,l,_.signal);o.value=y,s&&s.abort(),s=new AbortController;const n=await z(a,l,4,s.signal);e.value=n,I.set(a,l,{data:y,forecast:n})}catch(y){L(y)}finally{d.value=!1}};return ee(()=>{I.cleanup(),q()}),te(()=>{_?.abort(),s?.abort()}),(y,n)=>(c(),u("div",Qe,[t("button",{class:"btn btn-link mb-3 p-0 weather-details__back-btn",onClick:V},"‚Üê –ù–∞–∑–∞–¥ –∫ –ø–æ–∏—Å–∫—É"),t("div",Xe,[t("div",Ze,[t("h1",et," –ü–æ–≥–æ–¥–∞: "+m(o.value?.city||ie(h)||"‚Äî"),1),t("div",tt,[d.value?(c(),u("span",st,"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶")):b.value&&o.value?(c(),u("span",at," üì± –ò–∑ –∫—ç—à–∞ ")):C("",!0),d.value?C("",!0):(c(),u("button",{key:2,class:"btn btn-outline-primary btn-sm weather-refresh-btn",onClick:j,disabled:d.value,title:"–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"},[...n[2]||(n[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.3"})],-1),A(" –û–±–Ω–æ–≤–∏—Ç—å ",-1)])],8,it)),B.value?(c(),u("button",{key:3,class:"btn btn-outline-success btn-sm ai-advice-btn",onClick:G,disabled:O.value,title:"–ü–æ–ª—É—á–∏—Ç—å AI —Å–æ–≤–µ—Ç –ø–æ –ø–æ–≥–æ–¥–µ"},[O.value?(c(),u("span",rt)):(c(),u("span",nt,"ü§ñ")),A(" "+m(O.value?"AI –¥—É–º–∞–µ—Ç...":"AI —Å–æ–≤–µ—Ç"),1)],8,ot)):C("",!0)])]),v.value?(c(),ae(Se,{key:0,error:v.value,operation:"get-weather","can-retry":!0,"show-details":!0,onRetry:j,onDismiss:n[0]||(n[0]=g=>v.value="")},null,8,["error"])):d.value?(c(),u("div",lt,[n[5]||(n[5]=oe('<div class="weather-details__grid" data-v-6f2c582d><div class="weather-details__main" data-v-6f2c582d><div class="skeleton skeleton-temp display-4 mb-0" data-v-6f2c582d></div><div class="skeleton skeleton-desc mt-2" data-v-6f2c582d></div></div><div class="weather-details__icon" data-v-6f2c582d><div class="skeleton skeleton-icon" data-v-6f2c582d></div></div><div class="weather-details__meta" data-v-6f2c582d><div class="row g-2" data-v-6f2c582d><div class="col-6" data-v-6f2c582d><div class="weather-details__item" data-v-6f2c582d><div class="skeleton skeleton-label mb-1" data-v-6f2c582d></div><div class="skeleton skeleton-value" data-v-6f2c582d></div></div></div><div class="col-6" data-v-6f2c582d><div class="weather-details__item" data-v-6f2c582d><div class="skeleton skeleton-label mb-1" data-v-6f2c582d></div><div class="skeleton skeleton-value" data-v-6f2c582d></div></div></div><div class="col-6" data-v-6f2c582d><div class="weather-details__item" data-v-6f2c582d><div class="skeleton skeleton-label mb-1" data-v-6f2c582d></div><div class="skeleton skeleton-value" data-v-6f2c582d></div></div></div></div></div></div><hr class="my-3" data-v-6f2c582d>',2)),t("div",dt,[n[4]||(n[4]=t("div",{class:"skeleton skeleton-title h6 mb-2"},null,-1)),t("div",ct,[(c(),u(M,null,E(4,g=>t("div",{key:g,class:"forecast-brief__item"},[...n[3]||(n[3]=[t("div",{class:"skeleton skeleton-day mb-2"},null,-1),t("div",{class:"skeleton skeleton-forecast-icon mx-auto mb-2"},null,-1),t("div",{class:"skeleton skeleton-temps"},null,-1)])])),64))])])])):o.value?(c(),u("div",ut,[t("div",vt,[t("div",_t,m(o.value.temp)+"¬∞",1),t("div",mt,m(o.value.desc),1)]),t("div",pt,[t("img",{src:k.value,alt:"–ò–∫–æ–Ω–∫–∞ –ø–æ–≥–æ–¥—ã",width:"100",height:"100"},null,8,ht)]),t("div",ft,[t("div",yt,[t("div",bt,[t("div",gt,[n[6]||(n[6]=t("div",{class:"weather-details__label"},"–í–µ—Ç–µ—Ä",-1)),t("div",wt,m(o.value.wind.toFixed(1))+" –º/—Å",1)])]),t("div",kt,[t("div",$t,[n[7]||(n[7]=t("div",{class:"weather-details__label"},"–í–ª–∞–∂–Ω–æ—Å—Ç—å",-1)),t("div",Ct,m(o.value.humidity)+"%",1)])]),t("div",xt,[t("div",Dt,[n[8]||(n[8]=t("div",{class:"weather-details__label"},"–î–∞–≤–ª–µ–Ω–∏–µ",-1)),t("div",At,[A(m(o.value.pressure)+" –≥–ü–∞ ",1),t("span",St,"("+m($.value)+" –º–º)",1)])])])])])])):(c(),u("div",It,"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö‚Ä¶")),n[12]||(n[12]=t("hr",{class:"my-3"},null,-1)),e.value.length?(c(),u("div",Mt,[n[9]||(n[9]=t("div",{class:"forecast-brief__title h6 mb-2"},"–ö—Ä–∞—Ç–∫–∏–π –ø—Ä–æ–≥–Ω–æ–∑",-1)),t("div",Tt,[(c(!0),u(M,null,E(e.value,g=>(c(),u("div",{key:g.dateISO,class:"forecast-brief__item"},[t("div",Et,m(g.dayLabel),1),t("img",{class:"forecast-brief__icon",src:`https://openweathermap.org/img/wn/${g.icon}.png`,alt:g.desc,width:"42",height:"42",draggable:"false"},null,8,Ot),t("div",Ft,[t("span",Nt,m(g.max)+"¬∞",1),t("span",Rt,m(g.min)+"¬∞",1)])]))),128))])])):C("",!0),D.value?(c(),u("div",Wt,[t("div",Bt,[t("h6",Lt,[n[10]||(n[10]=t("span",{class:"me-2"},"ü§ñ",-1)),A(" "+m(T.value||"AI –°–æ–≤–µ—Ç"),1)]),t("button",{class:"btn btn-sm btn-outline-secondary",onClick:n[1]||(n[1]=g=>D.value=""),title:"–°–∫—Ä—ã—Ç—å —Å–æ–≤–µ—Ç"}," ‚úï ")]),t("div",jt,[t("div",Ut,m(D.value),1),n[11]||(n[11]=t("div",{class:"ai-advice-footer mt-2"},[t("small",{class:"text-muted d-flex align-items-center"},[t("span",{class:"me-1"},"üí°"),A(" –°–æ–≤–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω AI –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–∏—Ö –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π ")])],-1))])])):C("",!0)]),se(Ke,{"is-open":f.value,weather:W.value,forecast:H.value,onClose:Y},null,8,["is-open","weather","forecast"])]))}}),qt=R(zt,[["__scopeId","data-v-6f2c582d"]]);export{qt as default};
